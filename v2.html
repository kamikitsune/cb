<html>
<head><title>Taxi Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
</head>
<h1 class="text-center">Chambers Transportation</h1><br>
<span class="text-center">
<label for="pickup">Pickup</label>
<input id="pickup"/>
<label for="deposit">Destination</label>
<input id="deposit"/>
<label for="miles">Miles</label>
<input id="miles" type="number"/>
<button onclick="add()" class="btn btn-success">Add</button>
    <button onclick="addAd()" class="btn btn-info">Ad</button>
</span>
<br><br>
<span>Currently earn a total of <span id="total">0</span> with a total of commission of <span id="commission" >0</span></span>
<button onclick="reset()" class="btn btn-success">Reset</button><br>
<br>
<table class="table table-success">
    <thead>
    <tr>
        <td>Pickup</td>
        <td>Destination</td>
        <td>Miles</td>
        <td>Total</td>
        <td>Commission</td>
    </tr>
    </thead>
    <tbody id="table">

    </tbody>
</table>
<script>
    var total = 0;
    var commision = 0;

    function add() {
        let miles = parseFloat(document.getElementById('miles').value);
        total += (miles*20);
        commision += (miles * 10) ;
        update();
        addInTable();
    }

    function update() {
        document.getElementById('total').innerText = total;
        document.getElementById('commission').innerText = commision;
    }

    function addInTable() {
        let pickup = document.getElementById('pickup').value;
        let deposit = document.getElementById('deposit').value;
        let miles = parseFloat(document.getElementById('miles').value);
        let subtotal = miles * 20
        let commission = subtotal / 2;
        let tr = document.createElement('tr');
        tr.className = 'table table-success';
        setValueBetweenTd(pickup, tr);
        setValueBetweenTd(deposit, tr);
        setValueBetweenTd(miles, tr);
        setValueBetweenTd(subtotal, tr);
        setValueBetweenTd(commission, tr);
        document.getElementById('table').appendChild(tr);

    }

    function setValueBetweenTd(value, destination) {
        console.log(value);
        let td = document.createElement('td');
        td.innerText = value;
        destination.appendChild(td);
    }

    function addAd() {
        let tr = document.createElement('tr');
        tr.className = 'table table-warning';
        setValueBetweenTd('Posted ad', tr);
        setValueBetweenTd('', tr);
        setValueBetweenTd('0', tr);
        setValueBetweenTd('-10', tr);
        commision -= 10;
        update();
        document.getElementById('table').appendChild(tr);

    }

    function reset() {
        commision = 0;
        total = 0;
        let table = document.getElementById('table');
        while (table.hasChildNodes()) {
            table.removeChild(table.firstChild);
        }
        update();
    }
</script>
</html>
